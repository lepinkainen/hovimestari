# Project: Hovimestari - Personal AI Butler Assistant

For detailed project structure, technology stack, and core concepts, refer to `PROJECT_CONTEXT.md`.

## Language

- The name "Hovimestari" means "Butler" in Finnish.
- All briefs and responses are generated in a language the user can configure.
- Code comments and documentation are in English.
- All log output and CLI messages should be in English.

## Development Guidelines

### Code Style

- Follow standard Go code style and conventions (gofmt).
- Use meaningful variable and function names.
- Add comments for exported functions and types.
- Keep functions small and focused on a single responsibility.

### Error Handling

- Use the `fmt.Errorf("failed to X: %w", err)` pattern for error wrapping.
- Always check errors and provide context.
- Avoid panics in production code.

### Dependencies

- Prefer standard library solutions when possible.
- Minimize external dependencies, unless an external dependency makes the code more cleaner or efficient.
- Pin dependency versions in go.mod.

### LLM Prompts

- Store LLM prompts in English in configuration files (e.g., `prompts.json`).
- Use placeholders (e.g., `%LANG%`) for output language, which is specified in `config.json`.
- Use placeholders (e.g., `%NOTES%`) for dynamic content like memories.
- Keep prompts clear, concise, and focused on the specific task.

### Testing

- Write unit tests for core functionality.
- Use table-driven tests where appropriate.
- Mock external dependencies for testing.

## Common Tasks

### Adding a New Importer

1. Create a new package under `internal/importer/`.
2. Implement the importer with a similar interface to the calendar importer.
3. Add a new command in `cmd/hovimestari/main.go`.
4. Update the README.md with the new functionality.

### Modifying the Database Schema

1. Update the `Initialize` function in `internal/store/store.go`.
2. Add any new methods needed to interact with the new schema.
3. Consider adding a migration mechanism if the change is not backward compatible.

### Adding a New Command

1. Create a new command function in `cmd/hovimestari/main.go`.
2. Add the command to the root command in the `main` function.
3. Implement the command's functionality.
4. Update the README.md with the new command.

## Future Development

- Telegram integration for sending daily briefs and receiving queries.
- Additional importers (email, news, etc.).
- Web interface for viewing and managing memories.
- Scheduled execution via cron jobs.
